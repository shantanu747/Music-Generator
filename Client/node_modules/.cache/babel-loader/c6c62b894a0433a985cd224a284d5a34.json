{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _classCallCheck from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/Desktop/Melody/song-generation/Client/node_modules/@babel/runtime/helpers/esm/inherits\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n              background-color: #00A0EE;\\n              border: none;\\n              color: white;\\n              padding: 15px 32px;\\n              text-align: center;\\n              text-decoration: none;\\n              display: inline-block;\\n              font-size: 16px;\\n              margin: 4px 2px;\\n              cursor: pointer;\\n        \"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import styled from\"styled-components\";import*as mv from'@magenta/music';import*as core from'@magenta/music/node/core';import{BrowserRouter as Router,Route}from\"react-router-dom\";import{saveAs}from'file-saver';import Async from\"react-async\";import Main from\"./Main\";import SongList from\"../utilities/SongList\";// set vae temperature\nvar vae_temperature=1.5;var mSamples;var MaxSongs=[];var currentPlaying=null;var First=true;var Magenta=/*#__PURE__*/function(_React$Component){_inherits(Magenta,_React$Component);function Magenta(props){var _this;_classCallCheck(this,Magenta);_this=_possibleConstructorReturn(this,_getPrototypeOf(Magenta).call(this,props));_this.componentDidMount=function(){console.log(\"Got Model\",_this.model);console.log(\"Got player\",_this.player);_this.model.initialize().then(function(){// play with temperature passed in\n//this.playVAE(vae_temperature);\nconsole.log(\"Started Model\");});};_this.saveSequence=function(midiT){var midi=mv.sequenceProtoToMidi(midiT);var file=new Blob([midi],{type:'audio/midi'});saveAs(file,'blob.midi');};_this.interpolateInput=function(){if(_this.state.ready){var M=_this.state.allSongs;if(M.length==2){_this.playInterpolation(M[0].file,M[1].file,vae_temperature);console.log(\"2 Files\");}else{_this.playInterpolation4(M[0].file,M[1].file,M[2].file,M[3].file,vae_temperature);console.log(\"4 files\");}}};_this.playInterpolation=function(M1,M2,vae_temperature){//Steps per Quarter parameterMachine pre\nvar m1=mv.sequences.quantizeNoteSequence(M1,4);var m2=mv.sequences.quantizeNoteSequence(M2,4);_this.model.interpolate([m1,m2],4,vae_temperature)/*.then((sample) =>{\n             const concat = mv.sequences.concatenate(sample);\n              this.player.start(concat);*/.then(function(sample){var concat=mv.sequences.concatenate(sample);currentPlaying=concat;_this.saveSequence(concat);_this.player.start(concat);});};_this.playStop=function(){if(currentPlaying!=null){if(_this.player.isPlaying()){_this.player.stop();}else{_this.player.start(currentPlaying);}}};_this.playInterpolation4=function(M1,M2,M3,M4,vae_temperature){//Steps per Quarter parameterMachine pre\nvar m1=mv.sequences.quantizeNoteSequence(M1,24);var m2=mv.sequences.quantizeNoteSequence(M2,24);var m3=mv.sequences.quantizeNoteSequence(M3,24);var m4=mv.sequences.quantizeNoteSequence(M4,24);_this.model.interpolate([m1,m2,m3,m4],4,vae_temperature)/*.then((sample) =>{\n             const concat = mv.sequences.concatenate(sample);\n              this.player.start(concat);*/.then(function(sample){var concat=mv.sequences.concatenate(sample);currentPlaying=concat;_this.saveSequence(concat);_this.player.start(concat);});};_this.encodeMidi=function(f){//let newSong = new Blob([f], {type: 'audio/midi'});\nvar newSong=URL.createObjectURL(f);return mv.urlToBlob(newSong);};_this.checkpoint='https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/mel_4bar_small_q2';_this.model=new mv.MusicVAE(_this.checkpoint);_this.player=new core.Player();_this.state={allSongs:[],ready:false};_this.update=_this.update.bind(_assertThisInitialized(_this));_this.newSong=false;//Testing multiple files\n// MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n// MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n// MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n// MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\nreturn _this;}_createClass(Magenta,[{key:\"update\",value:function update(){this.setState({allSongs:MaxSongs});}},{key:\"handleChange\",value:function handleChange(e){var _this2=this;var Promises=[];var FinalPromise=[];if(e.target.files.length===0){console.log(\"Need to have files chose\");return;}var tempSongs=e.target.files;if(tempSongs.length>=2){MaxSongs=[];for(var i=0;i<tempSongs.length;i+=1){MaxSongs.push({id:i,name:tempSongs[i].name,file:null});Promises.push(this.encodeMidi(tempSongs[i],i));}Promise.all(Promises).then(function(e){for(var _i=0;_i<tempSongs.length;_i+=1){FinalPromise.push(mv.blobToNoteSequence(e[_i]));}Promise.all(FinalPromise).then(function(f){for(var _i2=0;_i2<tempSongs.length;_i2+=1){MaxSongs[_i2]={id:_i2,name:MaxSongs[_i2].name,file:f[_i2]};_this2.setState({allSongs:MaxSongs,ready:true});}//this.playInterpolation(MaxSongs[0].file, MaxSongs[1].file, vae_temperature);\n});});}// let filename = e.target.files[0];\n// setTimeout(()=>{\n//     console.log(this.encodeMidi(filename));\n// }, 0);\n}},{key:\"render\",value:function render(){var Button=styled.button(_templateObject());return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"input\"},React.createElement(\"form\",{id:\"file-uploader\",action:\"/action_page.php\"},React.createElement(\"input\",{id:\"file-input\",type:\"file\",multiple:\"multiple\",name:\"img\",onChange:this.handleChange.bind(this)})),React.createElement(SongList,{songs:this.state.allSongs})),React.createElement(\"div\",null,React.createElement(Button,{onClick:this.interpolateInput},\"Generator\"),React.createElement(Button,{onClick:this.playStop},\"Play / Stop\")));}}]);return Magenta;}(React.Component);export{Magenta as default};","map":{"version":3,"sources":["/home/oem/Desktop/Melody/song-generation/Client/src/components/modules/Generator.js"],"names":["React","styled","mv","core","BrowserRouter","Router","Route","saveAs","Async","Main","SongList","vae_temperature","mSamples","MaxSongs","currentPlaying","First","Magenta","props","componentDidMount","console","log","model","player","initialize","then","saveSequence","midiT","midi","sequenceProtoToMidi","file","Blob","type","interpolateInput","state","ready","M","allSongs","length","playInterpolation","playInterpolation4","M1","M2","m1","sequences","quantizeNoteSequence","m2","interpolate","sample","concat","concatenate","start","playStop","isPlaying","stop","M3","M4","m3","m4","encodeMidi","f","newSong","URL","createObjectURL","urlToBlob","checkpoint","MusicVAE","Player","update","bind","setState","e","Promises","FinalPromise","target","files","tempSongs","i","push","id","name","Promise","all","blobToNoteSequence","Button","button","handleChange","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from \"styled-components\";\nimport * as mv from '@magenta/music';\nimport * as core from '@magenta/music/node/core';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport {saveAs} from 'file-saver';\nimport Async from \"react-async\";\nimport Main from \"./Main\";\nimport SongList from \"../utilities/SongList\";\n    // set vae temperature\nconst vae_temperature = 1.5;\nlet mSamples;\nlet MaxSongs = []\nlet currentPlaying = null;\nlet First = true;\nexport default class Magenta extends React.Component {\n    constructor(props) {\n        super(props);\n        this.checkpoint = 'https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/mel_4bar_small_q2';\n        this.model = new mv.MusicVAE(this.checkpoint);\n\n        this.player = new core.Player();\n        this.state = {\n            allSongs: [],\n            ready: false\n        };\n        this.update = this.update.bind(this);\n\n        this.newSong = false;\n        //Testing multiple files\n        // MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n        // MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n        // MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n        // MaxSongs.push({\"song1\": new Blob([this.props.m1[1]], {type: 'audio/midi'})});\n    }\n    update(){\n        this.setState({allSongs: MaxSongs});\n\n    }\n\n    componentDidMount = () => {\n        console.log(\"Got Model\", this.model);\n        console.log(\"Got player\", this.player);\n        this.model\n            .initialize()\n            .then(() => {\n\n                // play with temperature passed in\n                //this.playVAE(vae_temperature);\n                console.log(\"Started Model\");\n            })\n\n    };\n    saveSequence = (midiT) =>{\n        const midi = mv.sequenceProtoToMidi(midiT);\n        const file = new Blob([midi], {type: 'audio/midi'});\n        saveAs(file, 'blob.midi');\n    };\n    interpolateInput = () =>{\n        if(this.state.ready){\n            let M = this.state.allSongs;\n            if(M.length == 2){\n                this.playInterpolation(M[0].file, M[1].file, vae_temperature);\n                console.log(\"2 Files\");\n            }else{\n                   this.playInterpolation4(M[0].file, M[1].file, M[2].file, M[3].file, vae_temperature);\n                   console.log(\"4 files\");\n            }\n        }\n    };\n    //Plays the interpolations between the\n    playInterpolation = (M1, M2, vae_temperature) =>{\n        //Steps per Quarter parameterMachine pre\n      const m1 = mv.sequences.quantizeNoteSequence(M1, 4);\n      const m2 = mv.sequences.quantizeNoteSequence(M2, 4);\n\n      this.model\n          .interpolate([m1, m2], 4, vae_temperature)\n          /*.then((sample) =>{\n             const concat = mv.sequences.concatenate(sample);\n              this.player.start(concat);*/\n          .then(sample =>{\n              const concat = mv.sequences.concatenate(sample);\n              currentPlaying = concat;\n              this.saveSequence(concat);\n              this.player.start(concat);\n        });\n    };\n    playStop = () =>{\n        if(currentPlaying != null) {\n            if (this.player.isPlaying()) {\n                this.player.stop();\n            } else {\n                this.player.start(currentPlaying);\n            }\n        }\n    };\n        //Plays the interpolations between the\n    playInterpolation4 = (M1, M2, M3, M4, vae_temperature) =>{\n        //Steps per Quarter parameterMachine pre\n      const m1 = mv.sequences.quantizeNoteSequence(M1, 24);\n      const m2 = mv.sequences.quantizeNoteSequence(M2, 24);\n      const m3 = mv.sequences.quantizeNoteSequence(M3, 24);\n      const m4 = mv.sequences.quantizeNoteSequence(M4, 24);\n\n      this.model\n          .interpolate([m1, m2, m3, m4], 4, vae_temperature)\n          /*.then((sample) =>{\n             const concat = mv.sequences.concatenate(sample);\n              this.player.start(concat);*/\n          .then(sample =>{\n              const concat = mv.sequences.concatenate(sample);\n              currentPlaying = concat;\n              this.saveSequence(concat);\n              this.player.start(concat);\n        });\n    };\n\n    encodeMidi =(f)=> {\n        //let newSong = new Blob([f], {type: 'audio/midi'});\n        let newSong = URL.createObjectURL(f);\n        return mv.urlToBlob(newSong);\n\n    };\n        handleChange(e){\n            let Promises = [];\n            let FinalPromise = [];\n            if(e.target.files.length === 0){\n                console.log(\"Need to have files chose\");\n                return;\n            }\n            let tempSongs = e.target.files;\n            if(tempSongs.length >= 2){\n                MaxSongs = [];\n                for(let i = 0; i < tempSongs.length; i+=1){\n                    MaxSongs.push({id: i, name: tempSongs[i].name, file: null});\n                    Promises.push(this.encodeMidi(tempSongs[i], i));\n\n                }\n                Promise.all(Promises).then( e => {\n                    for(let i = 0; i < tempSongs.length; i+=1) {\n                        FinalPromise.push(mv.blobToNoteSequence(e[i]));\n                    }\n                    Promise.all(FinalPromise).then(f => {\n                    for(let i = 0; i < tempSongs.length; i += 1){\n                        MaxSongs[i] = ({id: i, name: MaxSongs[i].name, file: f[i]});\n                        this.setState({allSongs: MaxSongs, ready: true});\n                    }\n                    //this.playInterpolation(MaxSongs[0].file, MaxSongs[1].file, vae_temperature);\n                });\n                });\n            }\n            // let filename = e.target.files[0];\n            // setTimeout(()=>{\n            //     console.log(this.encodeMidi(filename));\n            // }, 0);\n    };\n    render() {\n        const Button = styled.button`\n              background-color: #00A0EE;\n              border: none;\n              color: white;\n              padding: 15px 32px;\n              text-align: center;\n              text-decoration: none;\n              display: inline-block;\n              font-size: 16px;\n              margin: 4px 2px;\n              cursor: pointer;\n        `;\n        return (<div>\n                <div className={\"input\"}>\n                    <form id={\"file-uploader\"} action={\"/action_page.php\"}>\n                        <input id={\"file-input\"} type={\"file\"} multiple={\"multiple\"} name={\"img\"} onChange={this.handleChange.bind(this)} />\n                            </form>\n                    <SongList songs={this.state.allSongs}/>\n\n                    </div>\n                <div>\n                    <Button onClick={this.interpolateInput} >\n                    Generator\n                </Button>\n                <Button onClick={this.playStop}>\n                    Play / Stop\n                </Button>\n                </div>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}